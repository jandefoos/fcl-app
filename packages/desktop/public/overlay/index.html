<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <title>Overlay</title>
  <meta name="color-scheme" content="light dark" />
  <meta name="viewport"
    content="viewport-fit=cover, width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Roboto');

    :root {
      --bkggrey: #ccc;
      --bkgdark: #1d1d1b;
      --textinverted: #eee;
      --bkg: #eee;
      --bkgwhite: #fff;
      --red: #fc0303;
      --linee: #999;
    }

    body {
      background-color: rgba(0, 0, 0, 0) !important;
    }

    * {
      margin: 0;
      padding: 0;
    }

    .container {
      width: 100%;
      display: grid;
      font-family: 'Roboto', sans-serif;
      font-size: 2em;
      grid-template: 80px / 4% 37% 8% 2% 8% 37% 4%;
    }
    
    /* soccer.css */
    .containersoccer {
      margin: 30px 0;
    }
    .containersoccer div {
      text-align: center;
      grid-row: 1/2;
    }
    
    /* general settings */
    .box {
      font-family: 'Roboto', cursive;
      font-size: .8em;
      font-weight: bold;
      position: relative;
      text-align: center;
    }


    /* elements */
    
    .leftend {
      grid-column: 1 / 2;
      background: var(--bkgdark);
      color: var(--textinverted);
      border-top-left-radius: 20px;
      border-bottom-left-radius: 20px;
      line-height: 80px;
    }

    .boxteamleft {
      grid-column: 2 / 3;
      background: var(--bkg);
    }

    .boxleftpoints {
      grid-column: 3 / 4;
      background: var(--bkggrey);
    }

    .space {
      grid-column: 4 / 5;
      background: var(--bkggrey);
    }

    .boxrightpoints {
      grid-column: 5 / 6;
      background: var(--bkggrey);
    }

    .boxteamright {
      grid-column: 6 / 7;
      background: var(--bkg);
    }
    
    .rightend {
      grid-column: 7 / 8;
      background: var(--bkgdark);
      color: var(--textinverted);
      border-top-right-radius: 20px;
      border-bottom-right-radius: 20px;
      line-height: 80px;
    }
   
    .labelmoment {
      grid-column: 8 / 9;
    }
    
    .labelmoment {
      grid-column: 8 / 9;
    }


    .boxteamleft,
    .boxteamright,
    .leftend,
    .rightend {
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .boxleftpoints,
    .space,
    .boxrightpoints {
      background-color: var(--bkgdark);
      color: var(--bkgwhite);
      font-size: 1em;
      text-align: center;
      font-weight: bold;
      line-height: 80px;
    }

    .boxteamleft .logo,
    .boxteamright .logo {
      display: none;
      height: 100%;
      margin: -35px 0 -35px 0;
      /*padding: 5px;*/
      /*border-radius: 100px;*/
      background-color: var(--bkgwhite);
    }

    .boxteamleft .name,
    .boxteamright .name {
      padding: 0 1vw;
    }

    .boxteamleft {
      justify-content: flex-start;
    }
    .boxteamright {
      justify-content: flex-end;
      ;
    }

    .boxleftpoints,
    .boxteamleft {
      border-left: solid 1vw #999;
    }

    .boxrightpoints,
    .boxteamright {
      border-right: solid 1vw #999;
    }


    /* Match Points */

    .match_points {
      width: 100%;
      display: none;
      position: absolute;
      top: 65%;
      height: 30px;
      line-height: 30px;
      font-size: 16px;
      /* background-color: var(--bkggrey); */
    }

    .tournament_round {
      grid-column: 1 / 2;
      grid-column-start: span 3;
      width: 100%;
      display: none;
      position: absolute;
      top: 100%;
      height: 30px;
      line-height: 30px;
      font-size: 16px;
      background-color: var(--bkggrey);
    }
  </style>
</head>

<body>
  <div id="app">
    <section id="boxes">
      <div class="container containersoccer">
	<!-- 1 -->
        <div class="box leftend"></div>
	<!-- 2 -->
        <div class="box boxteamleft">
          <img class="logo" id="team_1_logo" />
          <div class="name" id="team_1"></div>
        </div>
	<!-- 3 -->
        <div class="box boxleftpoints">
          <div class="current_set" id="points_1"></div>
          <div class="match_points" id="matchpoints_1"></div>
        </div>
	<!-- 4 -->
        <div class="space">-</div>
	<!-- 5 -->
        <div class="box boxrightpoints">
          <div class="current_set" id="points_2"></div>
          <div class="match_points" id="matchpoints_2"></div>
        </div>
	<!-- 6 -->
        <div class="box boxteamright">
          <div class="name" id="team_2"></div>
          <img class="logo" id="team_2_logo" />
        </div>
	<!-- 7 -->
        <div class="box rightend"></div>
      </div>
    </section>
  </div>


  <script type="text/javascript">
    const renderLogo = (node, src) => {
      if (src) {
        node.src = `/assets/${src}`
        node.style.display = "block";
      } else {
        node.style.display = "none";
      }
    }

    const renderMatchpoints = (node, pts, otherpts) => {
      if (pts) {
        node.innerText = pts
        node.style.display = "block";
      } else if(otherpts){
        // if other team has points, render 0
        node.innerText = "0"
        node.style.display = "block";
      }else {
        // if no one has points, do not display
        node.style.display = "none";
      }
    }

    const render = (data) => {
      renderLogo(document.querySelector("#team_1_logo"), data.leftLogo)
      renderLogo(document.querySelector("#team_2_logo"), data.rightLogo)
      renderMatchpoints(document.querySelector("#matchpoints_1"), data.matchpointsLeft, data.matchpointsRight)
      renderMatchpoints(document.querySelector("#matchpoints_2"), data.matchpointsRight, data.matchpointsLeft)

      document.querySelector("#team_1").innerText = data.leftName || ""
      document.querySelector("#team_2").innerText = data.rightName || ""
      document.querySelector("#points_1").innerText = data.leftScore || "0"
      document.querySelector("#points_2").innerText = data.rightScore || "0"
    }

    const update = () => {
      fetch("http://localhost:9902/api", { method: "GET" })
        .then((res) => res.json())
        .then(render)
    }
    update()
    setInterval(update, 1000)

  </script>
</body>

</html>
